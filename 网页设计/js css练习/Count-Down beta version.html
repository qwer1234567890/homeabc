<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Count-Down beta version</title>
    <style>
    #time{
        width: 300px;
        height: 100px;
        font-size:35px;
        background-color:pink;
        border:1px solid blue;  
        text-align:center;
        line-height:100px;
        margin: 0 auto;
    }
    .wrap{
        margin:20px auto;
        text-align:center;
    }
    #select{
        width: 80px;
        margin: 0 30px;
    }
    #num{
        width: 80px;
    }
    #begin{
        margin-right:30px;
        width: 70px;
        text-align:center;
    }
    </style>
</head>
<body>
    <div id="time">00:00:00</div>
    <form action="" class="wrap">
        <input type="text" id="num" value="" placeholder="请输入数字"><select name="" id="select"></select><input type="button" value="开始计时" id="begin" ><input type="button" value="复位" id='circulation'>
    </form>
<script src="js/helper.js"></script>
<script>
!function(window,document,undefined){
    var time = Helper.dom('time');
    var num = Helper.dom('num');
    var select = Helper.dom('select');
    var begin = Helper.dom('begin');
    var circulation = Helper.dom('circulation');
    var arr = ['请选择','小时','分钟','秒'];
    var x,y,k,timer, h, m, s;
    select.innerHTML = '<option>' + arr.join('</option><option>') + '</option>';
    function abc(){
            m = s/60;
            h = s/3600;
            time.innerHTML= Helper.fill(Math.floor(h%24))+':'+ Helper.fill(Math.floor(m%60))+ ':'+ Helper.fill(s%60);
            s--;
            if (s < 10){
               time.style.color = 'blue'; 
            }
            if (s < 0){
                clearInterval(timer);
                alert('时间到');
                k = undefined;
                y = undefined;
                begin.value = '开始计时';
                select.value = arr[0];
                num.value = '';
                time.style.color = 'black';
            }
        }
    begin.onclick = function() {
        x = num.value;
        if(k) {
            clearInterval(timer);
            begin.value = '开始计时';
            k = undefined;
        }else{
            if(y){
                timer = setInterval(abc,1000);
                 y = s;       
                begin.value = '暂停';
            }else{
                if(isNaN(x)){
                    num.value = '';
                    return alert('请输入数字');
                };
                    if(x == 0){
                    num.value = '';
                    return alert('请输入非0整数');
                }
                if(select.value == arr[0]){
                    return alert('请选择单位');                 
                }else if(select.value == arr[1]){ 
                        s = x*3600;
                }else if (select.value == arr[2]){
                        s = x*60;
                }else if(select.value == arr[3]){
                        s = x;
                };
                abc();
                timer = setInterval(abc,1000);
                begin.value = '暂停';
                y = 1;////让y为true
                }
            k = 1;/////让k为true
        }
    }
    circulation.onclick = function() {
        k = undefined;
        y = undefined;
        num.value = '';
        time.innerHTML = '00:00:00';
        clearInterval(timer);
        begin.value = '开始计时';
        select.value = arr[0];
        time.style.color = 'black';
    }
}(window.document)
</script>
</body>
</html>