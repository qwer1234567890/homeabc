<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Count-Down</title>
    <style>
    #time{
        width: 300px;
        height: 100px;
        font-size:35px;
        background-color:pink;
        border:1px solid blue;  
        text-align:center;
        line-height:100px;
        margin: 0 auto;
    }
    .outer{
        margin:20px auto;
        text-align:center;
    }
    #select{
        width: 80px;
        margin: 0 30px;
    }
    #num{
        width: 80px;
    }
    </style>
</head>
<body>
    <div id="time">00:00:00</div>
    <form action="" class="outer">
        <input type="text" id="num" value="" placeholder="请输入数字"><select name="" id="select"></select><input type="button" value="开始计时" id="begin" >
    </form>
<script src="js/helper.js"></script>
<script>
!function(window,document,undefined){
    var time = Helper.dom('time');
    var num = Helper.dom('num');
    var select = Helper.dom('select');
    var begin = Helper.dom('begin');
    var arr = ['请选择','小时','分钟','秒'];
    var x,y,timer, h, m, s;
    select.innerHTML = '<option>' + arr.join('</option><option>') + '</option>';
    begin.onclick = function() {
        x = parseInt(num.value);
        y = Math.pow(10,num.value.length-1);       
        if(!timer) {
            if(!x || x < y ){
            num.value = '';
            return alert('请输入正确的格式');
            };
            if(select.value == arr[0]){
                return alert('请选择单位');
            }else if(select.value == arr[1]){ 
                s = x*3600;
            }else if (select.value == arr[2]){
                s = x*60;
            }else if(select.value == arr[3]){
                s = x;
            };
            function abc(){
                m = s/60;
                h = s/3600;
                time.innerHTML= Helper.fill(Math.floor(h%24))+':'+ Helper.fill(Math.floor(m%60))+ ':'+ Helper.fill(s%60);
                s--;
                if (s < 10){
                   time.style.color = 'blue'; 
                }
                if (s < 0){
                    clearInterval(timer);
                    time.style.color = 'black'; 
                    alert('时间到');
                }
            }
            abc();
            timer = setInterval(abc,1000);
            begin.value = '计时复位';
        }else{
            num.value = '';
            time.innerHTML = '00:00:00';
            clearInterval(timer);
            begin.value = '开始计时';
            select.value = arr[0];
            timer = undefined;
        }
    }
}(window.document)
</script>
</body>
</html>